### containerd安装

containerd已包含Kubernetes CRI 功能，和docker不同的是无需下载`cri-containerd-....`档案即可使用 CRI。

二进制安装containerd需要**`runc`**和**`CNI`**插件的支持。

#### 第 1 步：安装containerd

参考文档：https://github.com/containerd/containerd/blob/main/docs/getting-started.md

下载地址：https://containerd.io/downloads/

所有设备安装（`master`和`node`节点）

containerd 的官方二次制作版本可用于`amd64`（也称为`x86_64`）和`arm64`（也称为`aarch64`）结构。

[从https://github.com/containerd/containerd/releases](https://github.com/containerd/containerd/releases)下载`containerd-<VERSION>-<OS>-<ARCH>.tar.gz`存档，验证其sha256sum，并将其解压到：`/usr/local`

```shell
wget https://github.com/containerd/containerd/releases/download/v1.7.14/containerd-1.7.14-linux-amd64.tar.gz

tar xvf containerd-1.7.14-linux-amd64.tar.gz

[root@master ~]# tar xvf containerd-1.7.14-linux-amd64.tar.gz -C /usr/local
bin/
bin/containerd-shim
bin/ctr
bin/containerd-shim-runc-v1
bin/containerd
bin/containerd-stress
bin/containerd-shim-runc-v2



# 文件说明
containerd 的安装包中一共有五个文件，通过上面的命令它们被安装到了 usr/local/bin 目录中：

1. containerd：即容器的运行时，以 gRPC 协议的形式提供满足 OCI 标准的 API

2. containerd-release：containerd 项目的发行版发布工具

3. containerd-stress：containerd压力测试工具

4. containerd-shim：这是每一个容器的运行时载体，我们在 docker 宿主机上看到的 shim 也正是代表着一个个通过调用 containerd 启动的 docker 容器。

5. ctr：它是一个简单的 CLI 接口，用作 containerd 本身的一些调试用途，投入生产使用时还是应该配合docker 或者 cri-containerd 部署。
```

##### 1）修改containerd配置

配置Containerd所需的模块（所有节点）

```shell
cat <<EOF> /etc/modules-load.d/containerd.conf
overlay
br_netfilter
EOF

# 所有节点加载模块：
modprobe -- overlay
modprobe -- br_netfilter
```

创建初始配置文件

Containerd 的默认配置文件为 `/etc/containerd/config.toml`

```shell
$ mkdir -p /etc/containerd/
$ containerd config default > /etc/containerd/config.toml    #创建默认的配置文件
```



##### 2）配置 `systemd` cgroup 驱动

**参考文档：**https://kubernetes.io/zh-cn/docs/setup/production-environment/container-runtimes/#docker

结合 `runc` 使用 `systemd` cgroup 驱动，在 `/etc/containerd/config.toml` 中设置：

```shell
vim /etc/containerd/config.toml

# 找到containerd.runtimes.runc.options，添加SystemdCgroup = true

[plugins."io.containerd.grpc.v1.cri".containerd.runtimes]

        [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.runc]
          base_runtime_spec = ""
          cni_conf_dir = ""
          cni_max_conf_num = 0
          container_annotations = []
          pod_annotations = []
          privileged_without_host_devices = false
          runtime_engine = ""
          runtime_path = ""
          runtime_root = ""
          runtime_type = "io.containerd.runc.v2"

          [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.runc.options]
            BinaryName = ""
            CriuImagePath = ""
            CriuPath = ""
            CriuWorkPath = ""
            IoGid = 0
            IoUid = 0
            NoNewKeyring = false
            NoPivotRoot = false
            Root = ""
            ShimCgroup = "true"    # 此处修改为true
            SystemdCgroup = false
```

或者运行以下命令

```shell
sed -i 's#SystemdCgroup = false#SystemdCgroup = true#g' /etc/containerd/config.toml
```



**替换镜像源**

```shell
# 所有节点将sandbox_image的Pause镜像改成符合自己版本的地址：registry.aliyuncs.com/google_containers/pause:3.9
$ vim /etc/containerd/config.toml

  [plugins."io.containerd.grpc.v1.cri"]
    device_ownership_from_security_context = false
    disable_apparmor = false
    disable_cgroup = false
    disable_hugetlb_controller = true
    disable_proc_mount = false
    disable_tcp_service = true
    enable_selinux = false
    enable_tls_streaming = false
    enable_unprivileged_icmp = false
    enable_unprivileged_ports = false
    ignore_image_defined_volumes = false
    max_concurrent_downloads = 3
    max_container_log_line_size = 16384
    netns_mounts_under_state_dir = false
    restrict_oom_score_adj = false
    sandbox_image = "registry.aliyuncs.com/google_containers/pause:3.9" # 此处更换
    
#等同于：
$ sed -i "s#registry.k8s.io/pause#registry.aliyuncs.com/google_containers/pause#g"  /etc/containerd/config.toml

# DaoCloud源地址，参考文档：https://github.com/DaoCloud/public-image-mirror

$ sed -i "s#registry.k8s.io/pause#k8s.m.daocloud.io/pause#g"  /etc/containerd/config.toml

```



##### 3）通过 systemd 启动 containerd

还应该从https://raw.githubusercontent.com/containerd/containerd/main/containerd.service下载 `containerd.service`文件到目录`/usr/local/lib/systemd/system/containerd.service`(目录/usr/local/lib/systemd/system/需要创建)或`/usr/lib/systemd/system/containerd.service`中，并运行以下命令：

```shell
wget https://raw.githubusercontent.com/containerd/containerd/main/containerd.service
mkdir -p /usr/local/lib/systemd/system/
cp containerd.service /usr/local/lib/systemd/system/
```

若无法下载可创建containerd.service将下文复制进去

```shell
vim /usr/lib/systemd/system/containerd.service

# Copyright The containerd Authors.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

[Unit]
Description=containerd container runtime
Documentation=https://containerd.io
After=network.target local-fs.target

[Service]
#uncomment to fallback to legacy CRI plugin implementation with podsandbox support.
#Environment="DISABLE_CRI_SANDBOXES=1"
ExecStartPre=-/sbin/modprobe overlay
ExecStart=/usr/local/bin/containerd

Type=notify
Delegate=yes
KillMode=process
Restart=always
RestartSec=5
# Having non-zero Limit*s causes performance problems due to accounting overhead
# in the kernel. We recommend using cgroups to do container-local accounting.
LimitNPROC=infinity
LimitCORE=infinity
LimitNOFILE=infinity
# Comment TasksMax if your systemd version does not supports it.
# Only systemd 226 and above support this version.
TasksMax=infinity
OOMScoreAdjust=-999

[Install]
WantedBy=multi-user.target
```

设置开机启动

```shell
systemctl daemon-reload
systemctl enable --now containerd
systemctl status containerd.service
containerd  --version    #查看版本
```



#### 第 2 步：安装 runc

[从https://github.com/opencontainers/runc/releases](https://github.com/opencontainers/runc/releases)下载`runc.<ARCH>`二进制文件，验证其 sha256sum，

并将其安装到目录.`/usr/local/sbin/runc`

此处安装版本为：`v1.1.4/runc.amd64`

```shell
[root@master ~]# wget https://github.com/opencontainers/runc/releases/download/v1.1.4/runc.amd64


[root@master ~]# install -m 755 runc.amd64 /usr/local/sbin/runc
#出现以下说明安装没有问题
[root@master ~]# runc -version
runc version 1.1.4
commit: v1.1.4-0-g5fd4c4d1
spec: 1.0.2-dev
go: go1.17.10
libseccomp: 2.5.4

```

该二进制文件是静态构建的，应该适用于任何 Linux 发行版。

#### 第 3 步：安装CNI插件

[从https://github.com/containernetworking/plugins/releases](https://github.com/containernetworking/plugins/releases)下载`cni-plugins-<OS>-<ARCH>-<VERSION>.tgz`存档，验证其 sha256sum，并将其解压到：`/opt/cni/bin`

```shell
[root@master ~]# wget https://github.com/containernetworking/plugins/releases/download/v1.5.0/cni-plugins-linux-amd64-v1.5.0.tgz
[root@master ~]# mkdir -p /opt/cni/bin
[root@master ~]# tar Cxzvf /opt/cni/bin cni-plugins-linux-amd64-v1.5.0.tgz
./
./dhcp
./loopback
./README.md
./bandwidth
./ipvlan
./vlan
./static
./host-device
./LICENSE
./bridge
./dummy
./tuning
./vrf
./tap
./portmap
./firewall
./ptp
./host-local
./macvlan
./sbr

```



#### 第 3 步：运行时镜像加速器

在 `containerd` 中，你可以配置多个镜像加速器。这样，当一个加速器不可用时，`containerd` 可以自动尝试使用其他加速器。下面是具体的配置步骤。

##### 1. 创建或修改 `containerd` 配置文件

首先，确保 `containerd` 已经安装并正常运行。如果你还没有 `containerd` 的默认配置文件，可以使用以下命令生成一个默认配置文件：

```
bash复制代码sudo mkdir -p /etc/containerd
sudo containerd config default > /etc/containerd/config.toml
```

然后编辑 `/etc/containerd/config.toml` 配置文件：

```
bash
复制代码
sudo nano /etc/containerd/config.toml
```

##### 2. 配置多个镜像加速器

找到 `[plugins."io.containerd.grpc.v1.cri".registry.mirrors]` 部分，并添加多个镜像加速器。例如：

```
[plugins."io.containerd.grpc.v1.cri".registry]
  [plugins."io.containerd.grpc.v1.cri".registry.mirrors]
    [plugins."io.containerd.grpc.v1.cri".registry.mirrors."docker.io"]
      endpoint = [
        "https://<your-mirror-1>",
        "https://<your-mirror-2>",
        "https://<your-mirror-3>"
      ]
```

将 `<your-mirror-1>`, `<your-mirror-2>`, `<your-mirror-3>` 替换为你要使用的镜像加速器地址。例如，使用阿里云、腾讯云和网易蜂巢的加速器地址，可以配置如下：

```
      [plugins."io.containerd.grpc.v1.cri".registry.mirrors]

        [plugins."io.containerd.grpc.v1.cri".registry.mirrors."docker.io"]

          endpoint = ["https://docker.m.daocloud.io",
                      "https://reg-mirror.qiniu.com",
                      "https://hub-cache.moelove.info",
                      "https://docker.m.daocloud.io",
                      "https://huecker.io",
                      "https://dockerhub.timeweb.cloud",
                      "https://noohub.ru"
                     ]

```

##### 3. 重启 `containerd` 服务

编辑完成后，保存并关闭配置文件，然后重启 `containerd` 服务以应用更改：

```
bash
复制代码
sudo systemctl restart containerd
```

##### 4. 验证配置

你可以通过拉取镜像来验证配置是否生效。例如：

```
bash
复制代码
sudo ctr images pull docker.io/library/nginx:latest
```

如果配置正确，镜像将通过配置的镜像加速器进行拉取。

##### 示例完整配置

以下是一个包含多个镜像加速器的完整配置示例：

```
toml复制代码version = 2

[plugins]
  [plugins."io.containerd.grpc.v1.cri"]
    [plugins."io.containerd.grpc.v1.cri.containerd"]
      snapshotter = "overlayfs"
      default_runtime_name = "runc"
      no_pivot = false
      [plugins."io.containerd.grpc.v1.cri.containerd.default_runtime"]
        runtime_type = "io.containerd.runc.v2"
        [plugins."io.containerd.grpc.v1.cri.containerd.default_runtime.options]
          SystemdCgroup = true
    [plugins."io.containerd.grpc.v1.cri.registry]
      [plugins."io.containerd.grpc.v1.cri.registry.mirrors]
        [plugins."io.containerd.grpc.v1.cri.registry.mirrors."docker.io"]
          endpoint = [
            "https://<your-aliyun-accelerator>",
            "https://<your-tencent-accelerator>",
            "https://hub-mirror.c.163.com"
          ]
```

##### 常用的镜像加速器地址

- **阿里云**：`https://<your-aliyun-accelerator>`
- **腾讯云**：`https://<your-tencent-accelerator>`
- **网易蜂巢**：`https://hub-mirror.c.163.com`

确保你使用的是 HTTPS 协议，并且加速器地址是有效的。

通过以上步骤，你可以为 `containerd` 配置多个镜像加速器，以加快镜像拉取速度并提高可靠性。在 `containerd` 中，你可以配置多个镜像加速器。这样，当一个加速器不可用时，`containerd` 可以自动尝试使用其他加速器。下面是具体的配置步骤。

##### 1. 创建或修改 `containerd` 配置文件

首先，确保 `containerd` 已经安装并正常运行。如果你还没有 `containerd` 的默认配置文件，可以使用以下命令生成一个默认配置文件：

```
bash复制代码sudo mkdir -p /etc/containerd
sudo containerd config default > /etc/containerd/config.toml
```

然后编辑 `/etc/containerd/config.toml` 配置文件：

```
bash
复制代码
sudo nano /etc/containerd/config.toml
```

##### 2. 配置多个镜像加速器

找到 `[plugins."io.containerd.grpc.v1.cri".registry.mirrors]` 部分，并添加多个镜像加速器。例如：

```
toml复制代码[plugins."io.containerd.grpc.v1.cri".registry]
  [plugins."io.containerd.grpc.v1.cri".registry.mirrors]
    [plugins."io.containerd.grpc.v1.cri".registry.mirrors."docker.io"]
      endpoint = [
        "https://<your-mirror-1>",
        "https://<your-mirror-2>",
        "https://<your-mirror-3>"
      ]
```

将 `<your-mirror-1>`, `<your-mirror-2>`, `<your-mirror-3>` 替换为你要使用的镜像加速器地址。例如，使用阿里云、腾讯云和网易蜂巢的加速器地址，可以配置如下：

```
toml复制代码[plugins."io.containerd.grpc.v1.cri".registry]
  [plugins."io.containerd.grpc.v1.cri".registry.mirrors]
    [plugins."io.containerd.grpc.v1.cri".registry.mirrors."docker.io"]
      endpoint = [
        "https://<your-aliyun-accelerator>",
        "https://<your-tencent-accelerator>",
        "https://hub-mirror.c.163.com"
      ]
```

##### 3. 重启 `containerd` 服务

编辑完成后，保存并关闭配置文件，然后重启 `containerd` 服务以应用更改：

```
bash
复制代码
sudo systemctl restart containerd
```

##### 4. 验证配置

你可以通过拉取镜像来验证配置是否生效。例如：

```
bash
复制代码
sudo ctr images pull docker.io/library/nginx:latest
```

如果配置正确，镜像将通过配置的镜像加速器进行拉取。

##### 示例完整配置

以下是一个包含多个镜像加速器的完整配置示例：

```
toml复制代码version = 2

[plugins]
  [plugins."io.containerd.grpc.v1.cri"]
    [plugins."io.containerd.grpc.v1.cri.containerd"]
      snapshotter = "overlayfs"
      default_runtime_name = "runc"
      no_pivot = false
      [plugins."io.containerd.grpc.v1.cri.containerd.default_runtime"]
        runtime_type = "io.containerd.runc.v2"
        [plugins."io.containerd.grpc.v1.cri.containerd.default_runtime.options]
          SystemdCgroup = true
    [plugins."io.containerd.grpc.v1.cri.registry]
      [plugins."io.containerd.grpc.v1.cri.registry.mirrors]
        [plugins."io.containerd.grpc.v1.cri.registry.mirrors."docker.io"]
          endpoint = [
            "https://<your-aliyun-accelerator>",
            "https://<your-tencent-accelerator>",
            "https://hub-mirror.c.163.com"
          ]
```

##### 常用的镜像加速器地址

- **阿里云**：`https://<your-aliyun-accelerator>`
- **腾讯云**：`https://<your-tencent-accelerator>`
- **网易蜂巢**：`https://hub-mirror.c.163.com`

确保你使用的是 HTTPS 协议，并且加速器地址是有效的。

通过以上步骤，你可以为 `containerd` 配置多个镜像加速器，以加快镜像拉取速度并提高可靠性。

### 安装docker

1. 卸载旧版本

   ```shell
   sudo yum remove docker \
                     docker-client \
                     docker-client-latest \
                     docker-common \
                     docker-latest \
                     docker-latest-logrotate \
                     docker-logrotate \
                     docker-engine
   ```

   

2. 设置存储库

   ```shell
   sudo yum install -y yum-utils
   
   # 官方源（无法下载）
   sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
   
   # 阿里源
   sudo yum-config-manager --add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
   ```

3. 安装Docker Engine

   **方式一**：安装特定版本的docker-ce

   要安装特定版本，请首先列出存储库中的可用版本：

   ```shell
   yum list docker-ce --showduplicates | sort -r
   
   docker-ce.x86_64    3:25.0.0-1.el8    docker-ce-stable
   docker-ce.x86_64    3:24.0.7-1.el8    docker-ce-stable
   <...>
   ```

   

   必须制定--setopt=obsoletes=0，否则yum会自动安装更高版本

   ```shell
   sudo yum install docker-ce-<VERSION_STRING> docker-ce-cli-<VERSION_STRING> containerd.io docker-buildx-plugin docker-compose-plugin
   ```

   

   **方式二**：安装最新版本docker-ce

   ```shell
   sudo yum install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
   ```

4. 使用 `systemd` 驱动

   **参考文档：**https://kubernetes.io/zh-cn/docs/setup/production-environment/container-runtimes/#cgroupfs-cgroup-driver

    由于 kubeadm 把 kubelet 视为一个 [系统服务](https://kubernetes.io/zh-cn/docs/setup/production-environment/tools/kubeadm/kubelet-integration)来管理， 所以对基于 kubeadm 的安装， 我们推荐使用 `systemd` 驱动， 不推荐 kubelet [默认](https://kubernetes.io/zh-cn/docs/reference/config-api/kubelet-config.v1beta1)的 `cgroupfs` 驱动。

   

   Docker 在默认情况下使用Vgroup Driver为cgroupfs，而Kubernetes推荐使用systemd来替代cgroupfs

   

   ```shell
   mkdir -p /etc/docker
   
   cat <<EOF> /etc/docker/daemon.json
   { 
     "registry-mirrors": ["https://docker.m.daocloud.io"]  # docker加速
     "exec-opts": ["native.cgroupdriver=systemd"]          # 设置systemd驱动
   }
   EOF
   
   ```

5. 启动dokcer

   ```shell
   systemctl start docker & systemctl enable docker
   ```

   

#### 卸载 Docker Engine



1. 卸载 Docker Engine、CLI、containerd 和 Docker Compose 软件包：

   ```console
   sudo yum remove docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin docker-ce-rootless-extras
   ```

2. 主机上的镜像、容器、卷或自定义配置文件不会自动删除。要删除所有镜像、容器和卷，请执行以下操作：

   

   ```console
   sudo rm -rf /var/lib/docker
   sudo rm -rf /var/lib/containerd
   ```

您必须手动删除任何已编辑的配置文件。



####  cri-dockerd安装

kubernetes1.26.3版本需要安装cri-dockerd作为网络接口

**参考文档：**https://github.com/mirantis/cri-dockerd#build-and-install

[cri-dockerd下载地址](https://github.com/Mirantis/cri-dockerd/releases)

###### 3.6.11.1 rpm方式安装cri-dockerd

下载rpm包

```shell
yum install -y wget
wget https://github.com/Mirantis/cri-dockerd/releases/download/v0.3.1/cri-dockerd-0.3.1-3.el7.x86_64.rpm
```

安装cri-dockerd

```shell
yum install -y cri-dockerd-0.3.1-3.el7.x86_64.rpm

systemctl daemon-reload
systemctl start cri-docker
systemctl enable cri-docker.service
systemctl enable --now cri-docker.socket

systemctl status cri-docker
```

###### 3.6.11.2 go编译安装cri-dockerd

**安装go环境**

```shell
wget https://storage.googleapis.com/golang/getgo/installer_linux
chmod +x ./installer_linux
./installer_linux
source ~/.bash_profile
```

**克隆cri-dockerd文件**

```shell
git clone https://github.com/Mirantis/cri-dockerd.git
```

**编译安装cri-dockerd**

```shell
cd cri-dockerd
mkdir bin
go build -o bin/cri-dockerd
mkdir -p /usr/local/bin
install -o root -g root -m 0755 bin/cri-dockerd /usr/local/bin/cri-dockerd
cp -a packaging/systemd/* /etc/systemd/system
sed -i -e 's,/usr/bin/cri-dockerd,/usr/local/bin/cri-dockerd,' /etc/systemd/system/cri-docker.service
systemctl daemon-reload
systemctl enable cri-docker.service
systemctl enable --now cri-docker.socket
```

**Kubernetes使用**（安装组件后配置）

1. Kubernetes网络插件默认是cni，需要追加**`--network-plugin=cni`**，通过该配置告诉容器，使用kubernetes的网络接口。
2. pause镜像是一切的 Pod 的基础

```shell
# go编译安装路径
vim /etc/systemd/system/cri-docker.service
# rpm安装路径
vim /usr/lib/systemd/system/cri-docker.service

[root@master ~]# cat /etc/systemd/system/cri-docker.service 
[Unit]
Description=CRI Interface for Docker Application Container Engine
Documentation=https://docs.mirantis.com
After=network-online.target firewalld.service docker.service
Wants=network-online.target
Requires=cri-docker.socket

[Service]
Type=notify
ExecStart=/usr/local/bin/cri-dockerd --container-runtime-endpoint fd:// # 此处添加一下内容
ExecReload=/bin/kill -s HUP $MAINPID
TimeoutSec=0
RestartSec=2
Restart=always

# Note that StartLimit* options were moved from "Service" to "Unit" in systemd 229.
# Both the old, and new location are accepted by systemd 229 and up, so using the old location
# to make them work for either version of systemd.
StartLimitBurst=3

# Note that StartLimitInterval was renamed to StartLimitIntervalSec in systemd 230.
# Both the old, and new name are accepted by systemd 230 and up, so using the old name to make
# this option work for either version of systemd.
StartLimitInterval=60s

# Having non-zero Limit*s causes performance problems due to accounting overhead
# in the kernel. We recommend using cgroups to do container-local accounting.
LimitNOFILE=infinity
LimitNPROC=infinity
LimitCORE=infinity

# Comment TasksMax if your systemd version does not support it.
# Only systemd 226 and above support this option.
TasksMax=infinity
Delegate=yes
KillMode=process

[Install]
WantedBy=multi-user.target

```

需要将以上两条1，2的参数追加在ExecStart后面

```shell
ExecStart=/usr/local/bin/cri-dockerd --container-runtime-endpoint fd:// --network-plugin=cni --pod-infra-container-image=registry.aliyuncs.com/google_containers/pause:3.9
```

**启动cri-dockerd**

```shell
systemctl daemon-reload
systemctl enable cri-docker.service
systemctl enable --now cri-docker.socket
systemctl start cri-docker
```

验证cri-dockerd

```shell
[root@master ~]# systemctl status cri-docker
● cri-docker.service - CRI Interface for Docker Application Container Engine
     Loaded: loaded (/etc/systemd/system/cri-docker.service; enabled; vendor preset: disabled)
     Active: active (running) since Tue 2022-12-06 23:31:18 CST; 1min 34s ago
TriggeredBy: ● cri-docker.socket
       Docs: https://docs.mirantis.com
   Main PID: 6861 (cri-dockerd)
      Tasks: 6
     Memory: 50.3M
        CPU: 84ms
     CGroup: /system.slice/cri-docker.service
             └─6861 /usr/local/bin/cri-dockerd --container-runtime-endpoint fd:// --network-plugin=cni --pod-infra-container-image=registry.aliyuncs.com/google_containers/pause:3.9

Dec 06 23:31:18 master cri-dockerd[6861]: time="2022-12-06T23:31:18+08:00" level=info msg="Start docker client with request timeout 0s"
Dec 06 23:31:18 master cri-dockerd[6861]: time="2022-12-06T23:31:18+08:00" level=info msg="Hairpin mode is set to none"
Dec 06 23:31:18 master cri-dockerd[6861]: time="2022-12-06T23:31:18+08:00" level=info msg="Loaded network plugin cni"
Dec 06 23:31:18 master cri-dockerd[6861]: time="2022-12-06T23:31:18+08:00" level=info msg="Docker cri networking managed by network plugin cni"
Dec 06 23:31:18 master cri-dockerd[6861]: time="2022-12-06T23:31:18+08:00" level=info msg="Docker Info: &{ID:37LI:R2SF:5ZQM:SFBX:6KGE:KFLT:CWY5:ZF4D:LK2C:GSBR:DBJH:K5SA Contain>
Dec 06 23:31:18 master cri-dockerd[6861]: time="2022-12-06T23:31:18+08:00" level=info msg="Setting cgroupDriver systemd"
Dec 06 23:31:18 master cri-dockerd[6861]: time="2022-12-06T23:31:18+08:00" level=info msg="Docker cri received runtime config &RuntimeConfig{NetworkConfig:&NetworkConfig{PodCid>
Dec 06 23:31:18 master cri-dockerd[6861]: time="2022-12-06T23:31:18+08:00" level=info msg="Starting the GRPC backend for the Docker CRI interface."
Dec 06 23:31:18 master cri-dockerd[6861]: time="2022-12-06T23:31:18+08:00" level=info msg="Start cri-dockerd grpc backend"
Dec 06 23:31:18 master systemd[1]: Started CRI Interface for Docker Application Container Engine.
lines 1-22/22 (END)

```

表示安装完成。